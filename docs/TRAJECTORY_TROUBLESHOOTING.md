# 手榴彈軌跡顯示 - 完整使用指南

## 🎯 如何正確使用手榴彈軌跡顯示功能

### 📋 操作步驟（重要！必須按順序）

1. **第一步：按Y鍵開啟軌跡顯示功能**
   - 按下 `Y` 鍵
   - 看到控制台顯示："🎯 手榴彈軌跡顯示已開啟"
   - 左下角UI顯示："軌跡顯示: 開啟"

2. **第二步：按H鍵進入手榴彈瞄準模式**
   - 按下 `H` 鍵進入手榴彈瞄準模式
   - 左下角UI顯示："瞄準模式: 開啟"

3. **第三步：移動滑鼠查看軌跡**
   - 移動滑鼠到不同位置
   - 此時應該能看到虛線軌跡預測路徑
   - 軌跡顏色：綠色 → 黃色 → 紅色
   - 終點顯示紅色爆炸範圍圓圈

### ⚠️ 常見問題排解

#### 問題1：按了Y鍵但看不到軌跡
**原因**：還沒進入手榴彈瞄準模式
**解決**：先按 `H` 鍵進入瞄準模式
**提示**：螢幕上會顯示"提示：按H鍵進入手榴彈瞄準模式查看軌跡"

#### 問題2：進入瞄準模式但看不到軌跡
**原因**：軌跡顯示功能未開啟
**解決**：按 `Y` 鍵開啟軌跡顯示
**提示**：螢幕上會顯示"提示：按Y鍵開啟手榴彈軌跡顯示"

#### 問題3：軌跡顯示不連續或斷斷續續
**原因**：這是正常的虛線效果
**說明**：軌跡採用虛線樣式，間隔8像素的線段和6像素的空隙

### 🎮 完整操作流程

```
第一次使用：
1. Y鍵 → 開啟軌跡顯示功能
2. H鍵 → 進入手榴彈瞄準模式
3. 移動滑鼠 → 查看軌跡預測
4. G鍵 → 投擲手榴彈

後續使用：
1. H鍵 → 進入/退出瞄準模式
2. Y鍵 → 開啟/關閉軌跡顯示
3. G鍵 → 投擲手榴彈
4. 右鍵 → 引爆所有手榴彈
```

### 📊 UI狀態指示器（左下角）

```
💣 手榴彈系統
剩餘: 5/5        ← 可投擲數量
場上: 0          ← 已投擲未引爆數量
瞄準模式: 關閉    ← H鍵控制
軌跡顯示: 關閉    ← Y鍵控制

操作提示：
G - 投擲手榴彈
H - 切換瞄準模式
Y - 切換軌跡顯示
右鍵 - 引爆所有手榴彈
```

### 🔧 調試信息

如果仍有問題，檢查控制台輸出：
- `🎯 手榴彈軌跡顯示已開啟` - Y鍵成功
- `🎯 手榴彈軌跡顯示已關閉` - Y鍵成功
- 左下角UI狀態必須同時顯示：
  - `瞄準模式: 開啟`
  - `軌跡顯示: 開啟`

### 🎨 軌跡視覺效果說明

當軌跡正確顯示時，你會看到：

1. **虛線軌跡**
   - 顏色漸變：綠色（起點）→ 黃色（中段）→ 紅色（終點）
   - 虛線間隔：8像素線段 + 6像素間隔
   - 線寬變化：起點較粗，終點較細

2. **爆炸範圍指示**
   - 半透明紅色圓圈表示爆炸影響範圍
   - 紅色邊框清楚標示危險區域
   - 只在軌跡終點顯示

3. **物理模擬**
   - 真實重力影響（每幀 +0.3 速度）
   - 平台碰撞檢測（軌跡在碰撞點終止）
   - 最多顯示50個軌跡點

### 💡 使用技巧

1. **精準瞄準**：軌跡終點的紅圓圈就是實際爆炸位置
2. **安全投擲**：確保自己不在紅色爆炸範圍內
3. **間接攻擊**：利用軌跡計算反彈或間接路線
4. **節約手榴彈**：軌跡預測幫助一擊必中

### 🚀 高級用法

- **多重投擲**：可投擲多個手榴彈，每個都會顯示軌跡
- **動態調整**：軌跡會即時跟隨滑鼠移動更新
- **地形利用**：軌跡考慮平台碰撞，可計劃複雜攻擊路線
- **戰術規劃**：結合爆炸範圍指示器進行策略性布置

---

## 🔍 故障排除檢查表

- [ ] 已按Y鍵開啟軌跡顯示
- [ ] 已按H鍵進入瞄準模式  
- [ ] 左下角UI顯示兩項都為"開啟"
- [ ] 玩家角色存活
- [ ] 移動滑鼠測試軌跡變化

如果所有項目都勾選但仍看不到軌跡，請檢查控制台是否有錯誤信息。